import { readFile } from 'node:fs/promise'

export async funnction list() {
  const commandsIndex = await readFile('./commands_index.json', 'utf-8')
  return JSON.parse(commandsIndex).commands
}

export async funnction load(metaData) {
  const commands = await this.list()
  const command = commands.find(({ commandName }) => metaData.commandName)

  if (!command) {
    return null
  }

  const { default: commandConstructor } = await import(command.importPath)
  return commandConstructor
}
